var hasOwnProperty=Object.prototype.hasOwnProperty,nativeForEach=Array.prototype.forEach,slice=Array.prototype.slice,breaker={},each=function(a,b,c){if(a!=null)if(nativeForEach&&a.forEach===nativeForEach)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,f=a.length;d<f;d++){if(d in a&&b.call(c,a[d],d,a)===breaker)break}else for(d in a)if(hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a)===breaker)break},extend=function(a){each(slice.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=
b[c])});return a},defaultValidators={required:function(a){return a===void 0||a===null?!0:a.length||a!==""},email:function(a){return a.match(/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i)},ssn:function(a){return a.match(/\b[0-9]{3}-[0-9]{2}-[0-9]{4}\b/)},date:function(a){return a.match(/(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)[0-9]{2}/)},iso8601:function(a){return a.match(/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/)}},isInvalidField=function(a,b,c,d){if(!c)return!0;for(var f=
a[b],c=!c.push?c.validations:c,g=0;g<c.length;g++){var e=c[g];if(e.isValid.test){if(!e.isValid.test(f))return e.message||b+" is invalid"}else if(typeof e.isValid=="function"){if(!e.isValid(f,a))return e.message||b+" is invalid"}else{var h=d[e.isValid];if(h){if(!h(f,a))return e.message||b+" is invalid"}else alert("Validation Function not found: "+e.isValid)}}return""},isVisibleField=function(a,b){return b&&b.isVisible&&typeof b.isVisible=="function"&&!b.isVisible(a)?!1:!0},validateForm=function(a,
b){var c={},d=!0;each(b.fields,function(f,g){var e=isVisibleField(a,f),h=isInvalidField(a,g,f,extend(defaultValidators,b.validators||{})),i=!e||e&&h==="";d&=i;c[g]={visible:e,error:h,valid:!!i}});each(a,function(a,b){hasOwnProperty.call(c,b)||(c[b]={visible:!0,error:"",valid:!0})});return{fields:c,validForm:!!d}};
