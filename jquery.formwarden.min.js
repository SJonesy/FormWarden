var hasOwnProperty=Object.prototype.hasOwnProperty,nativeForEach=Array.prototype.forEach,slice=Array.prototype.slice,breaker={},each=function(a,b,c){if(a!=null)if(nativeForEach&&a.forEach===nativeForEach)a.forEach(b,c);else if(a.length===+a.length)for(var d=0,g=a.length;d<g;d++){if(d in a&&b.call(c,a[d],d,a)===breaker)break}else for(d in a)if(hasOwnProperty.call(a,d)&&b.call(c,a[d],d,a)===breaker)break},extend=function(a){each(slice.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=
b[c])});return a},defaultValidators={required:function(a){return a===void 0||a===null?!0:a.length||a!==""},email:function(a){return a.match(/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i)},ssn:function(a){return a.match(/\b[0-9]{3}-[0-9]{2}-[0-9]{4}\b/)},date:function(a){return a.match(/(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)[0-9]{2}/)},iso8601:function(a){return a.match(/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/)}},isInvalidField=function(a,b,c,d){if(!c)return!0;for(var g=
a[b],c=!c.push?c.validations:c,f=0;f<c.length;f++){var e=c[f];if(e.isValid.test){if(!e.isValid.test(g))return e.message||b+" is invalid"}else if(typeof e.isValid=="function"){if(!e.isValid(g,a))return e.message||b+" is invalid"}else{var h=d[e.isValid];if(h){if(!h(g,a))return e.message||b+" is invalid"}else alert("Validation Function not found: "+e.isValid)}}return""},isVisibleField=function(a,b){return b&&b.isVisible&&typeof b.isVisible=="function"&&!b.isVisible(a)?!1:!0},validateForm=function(a,
b){var c={},d=!0;each(b.fields,function(g,f){var e=isVisibleField(a,g),h=isInvalidField(a,f,g,extend(defaultValidators,b.validators||{})),i=!e||e&&h==="";d&=i;c[f]={visible:e,error:h,valid:!!i}});each(a,function(a,b){hasOwnProperty.call(c,b)||(c[b]={visible:!0,error:"",valid:!0})});return{fields:c,validForm:!!d}},fieldsEntered={};
(function(a){a.fn.validation=function(b){var c=this,d=function(b,f){var d,e,g=a(".validation_summary",c);g.html("");a("[name]",c).parent("p,div").removeClass("invalid");a("span.star").remove();for(d in b.fields)e=b.fields[d],Object.prototype.hasOwnProperty.call(f,d)&&e.valid===!1&&(e=a("[name="+d+"]",c).parent("p,div"),e.append("<span class='star'>*</span>"),e.addClass("invalid"),g.append("<li>"+b.fields[d].error+"</li>"))},g=function(b){for(var c in b.fields){var d=a("[name="+c+"]");b.fields[c].visible?
(d.parent("p, div").show(),d.removeAttr("disabled")):(d.parent("p, div").hide(),d.attr("disabled","disabled"))}},f=b?jQuery.extend({enableBlur:!0},b):{};if(this[0].tagName!=="FORM")alert("must be a form element");else{f.validators=f.validators||{};f.processErrors=f.processErrors?f.processErrors:d;f.processVisibility=f.processVisibility?f.processVisibility:g;var e=function(){var b={};a("[name]",c).each(function(c,d){var e=a(this).val(),f=d.name;d.type=="radio"&&a("[name='"+f+"']:checked").length===
0&&(e="");d.type=="checkbox"&&(e=a("[name="+f+"]:checked"),e=e.length===0?"":e.map(function(){return this.value}).toArray());d.type=="select-multiple"&&(e=a("[name="+f+"] option:selected"),e=e.length===0?"":e.map(function(){return this.value}).toArray());b[d.name]=e});return b},h=function(){var a=e(),a=validateForm(a,f,fieldsEntered);f.processErrors(a,fieldsEntered);f.processVisibility(a);return a.validForm};a(this).submit(function(){fieldsEntered=e();return h()});f.enableBlur&&(b=function(){fieldsEntered[this.name]=
!0;return h()},a("select[name]",c).change(b),a("select multiple[name]",c).change(b),a("[type='radio'][name]",c).change(b),a("[type='checkbox'][name]",c).change(b),a("[name]",c).blur(b));fieldsEntered={};h()}}})(jQuery);
