var hasOwnProperty=Object.prototype.hasOwnProperty,nativeForEach=Array.prototype.forEach,slice=Array.prototype.slice,breaker={},each=function(a,b,d){if(a!=null)if(nativeForEach&&a.forEach===nativeForEach)a.forEach(b,d);else if(a.length===+a.length)for(var f=0,c=a.length;f<c;f++){if(f in a&&b.call(d,a[f],f,a)===breaker)break}else for(f in a)if(hasOwnProperty.call(a,f)&&b.call(d,a[f],f,a)===breaker)break},extend=function(a){each(slice.call(arguments,1),function(b){for(var d in b)b[d]!==void 0&&(a[d]=
b[d])});return a},defaultValidators={required:function(a){return a===void 0||a===null?!0:a.length||a!==""},email:function(a){return a.match(/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i)},ssn:function(a){return a.match(/\b[0-9]{3}-[0-9]{2}-[0-9]{4}\b/)},date:function(a){return a.match(/(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)[0-9]{2}/)},iso8601:function(a){return a.match(/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/)},maxLength:function(a,b,d){return a.length<d.length},minLength:function(a,
b,d){return a.length>d.length}},isInvalidField=function(a,b,d,f){if(!d)return!0;for(var c=a[b],d=!d.push?d.validations:d,g=0;g<d.length;g++){var e=d[g];if(e.isValid.test){if(!e.isValid.test(c))return e.message||b+" is invalid"}else if(typeof e.isValid=="function"){if(!e.isValid(c,a))return e.message||b+" is invalid"}else{var h=f[e.isValid];if(h)if(h(c,a,e))e.valid&&e.valid();else return e.invalid&&e.invalid(),e.message||b+" is invalid";else alert("Validation Function not found: "+e.isValid)}}return""},
isVisibleField=function(a,b){return b&&b.isVisible&&typeof b.isVisible=="function"&&!b.isVisible(a)?!1:!0},validateForm=function(a,b){var d={},f=!0;each(b.fields,function(c,g){var e=isVisibleField(a,c),h=isInvalidField(a,g,c,extend(defaultValidators,b.validators||{})),i=!e||e&&h==="";f&=i;d[g]={visible:e,error:h,valid:!!i}});each(a,function(a,b){hasOwnProperty.call(d,b)||(d[b]={visible:!0,error:"",valid:!0})});return{fields:d,validForm:!!f}},fieldsEntered={};
(function(a){a.fn.validation=function(){var b=Array.prototype.slice.call(arguments);if(b.length===2&&b[0]==="valid")a(this).data("valid",b[1]);else if(b.length===2&&b[0]==="invalid")a(this).data("invalid",b[1]);else{var d=this,b=function(b,e){var c,f,g=a(".validation_summary",d);g.html("");a("[name]",d).parent().removeClass("invalid");a(".star").remove();for(c in b.fields)if(f=b.fields[c],Object.prototype.hasOwnProperty.call(e,c)&&f.valid===!1){var j=a("[name="+c+"]",d);f=j.parent();j.attr("title",
b.fields[c].error.replace("*",""));f.addClass("invalid");g.append("<li>"+b.fields[c].error.replace("*","")+"</li>")}},f=function(b){for(var d in b.fields){var c=a("[name="+d+"]");b.fields[d].visible?(c.parent("p, div").show(),c.removeAttr("disabled")):(c.parent("p, div").hide(),c.attr("disabled","disabled"))}},c=arguments[0]?jQuery.extend({enableBlur:!0},arguments[0]):{};if(this[0].tagName!=="FORM")alert("must be a form element");else{c.validators=c.validators||{};c.processErrors=c.processErrors?
c.processErrors:b;c.processVisibility=c.processVisibility?c.processVisibility:f;var g=function(){var b={};a("[name]",d).each(function(d,c){var e=a(this).val(),f=c.name;c.type=="radio"&&a("[name='"+f+"']:checked").length===0&&(e="");c.type=="checkbox"&&(e=a("[name="+f+"]:checked"),e=e.length===0?"":e.map(function(){return this.value}).toArray());c.type=="select-multiple"&&(e=a("[name="+f+"] option:selected"),e=e.length===0?"":e.map(function(){return this.value}).toArray());b[c.name]=e});return b},
e=function(){var a=g(),a=validateForm(a,c,fieldsEntered);c.processErrors(a,fieldsEntered);c.processVisibility(a);return a.validForm};a(this).submit(function(b){fieldsEntered=g();if(!e())return b.preventDefault(),b.stopPropagation(),typeof a(this).data("invalid")==="function"&&a(this).data("invalid")(b),!1;typeof a(this).data("valid")==="function"&&a(this).data("valid")(b)});c.enableBlur&&(b=function(){fieldsEntered[this.name]=!0;return e()},a("select[name]",d).change(b),a("select multiple[name]",
d).change(b),a("[type='radio'][name]",d).change(b),a("[type='checkbox'][name]",d).change(b),a("[name]",d).blur(b));fieldsEntered={};e()}}}})(jQuery);
