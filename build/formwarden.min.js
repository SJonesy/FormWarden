var hasOwnProperty=Object.prototype.hasOwnProperty,nativeForEach=Array.prototype.forEach,slice=Array.prototype.slice,breaker={},each=function(a,b,c){if(a!=null)if(nativeForEach&&a.forEach===nativeForEach)a.forEach(b,c);else if(a.length===+a.length)for(var e=0,f=a.length;e<f;e++){if(e in a&&b.call(c,a[e],e,a)===breaker)break}else for(e in a)if(hasOwnProperty.call(a,e)&&b.call(c,a[e],e,a)===breaker)break},extend=function(a){each(slice.call(arguments,1),function(b){for(var c in b)b[c]!==void 0&&(a[c]=
b[c])});return a},defaultValidators={required:function(a){return a===void 0||a===null?!0:a.length||a!==""},email:function(a){return a.match(/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i)},ssn:function(a){return a.match(/\b[0-9]{3}-[0-9]{2}-[0-9]{4}\b/)},date:function(a){return a.match(/(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)[0-9]{2}/)},iso8601:function(a){return a.match(/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/)},maxLength:function(a,b,c){return a.length<=c.length},minLength:function(a,
b,c){return a.length>=c.length}},isInvalidField=function(a,b,c,e){if(!c)return!0;for(var f=a[b],c=!c.push?c.validations:c,g=0;g<c.length;g++){var d=c[g];if(d.isValid.test){if(!d.isValid.test(f))return d.message||b+" is invalid"}else if(typeof d.isValid=="function"){if(!d.isValid(f,a))return d.message||b+" is invalid"}else{var h=e[d.isValid];if(h)if(h(f,a,d))d.valid&&d.valid();else return d.invalid&&d.invalid(),d.message||b+" is invalid";else alert("Validation Function not found: "+d.isValid)}}return""},
isVisibleField=function(a,b){return b&&b.isVisible&&typeof b.isVisible=="function"&&!b.isVisible(a)?!1:!0},validateForm=function(a,b){var c={},e=!0;each(b.fields,function(f,g){var d=isVisibleField(a,f),h=isInvalidField(a,g,f,extend(defaultValidators,b.validators||{})),i=!d||d&&h==="";e&=i;c[g]={visible:d,error:h,valid:!!i}});each(a,function(a,b){hasOwnProperty.call(c,b)||(c[b]={visible:!0,error:"",valid:!0})});return{fields:c,validForm:!!e}};
