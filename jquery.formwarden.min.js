var hasOwnProperty=Object.prototype.hasOwnProperty,nativeForEach=Array.prototype.forEach,slice=Array.prototype.slice,breaker={},each=function(a,b,e){if(a!=null)if(nativeForEach&&a.forEach===nativeForEach)a.forEach(b,e);else if(a.length===+a.length)for(var f=0,c=a.length;f<c;f++){if(f in a&&b.call(e,a[f],f,a)===breaker)break}else for(f in a)if(hasOwnProperty.call(a,f)&&b.call(e,a[f],f,a)===breaker)break},extend=function(a){each(slice.call(arguments,1),function(b){for(var e in b)b[e]!==void 0&&(a[e]=
b[e])});return a},defaultValidators={required:function(a){return a===void 0||a===null?!0:a.length||a!==""},email:function(a){return a.match(/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i)},ssn:function(a){return a.match(/\b[0-9]{3}-[0-9]{2}-[0-9]{4}\b/)},date:function(a){return a.match(/(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)[0-9]{2}/)},iso8601:function(a){return a.match(/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/)},maxLength:function(a,b,e){return a.length<e.length},minLength:function(a,
b,e){return a.length>e.length}},isInvalidField=function(a,b,e,f){if(!e)return!0;for(var c=a[b],e=!e.push?e.validations:e,g=0;g<e.length;g++){var d=e[g];if(d.isValid.test){if(!d.isValid.test(c))return d.message||b+" is invalid"}else if(typeof d.isValid=="function"){if(!d.isValid(c,a))return d.message||b+" is invalid"}else{var h=f[d.isValid];if(h)if(h(c,a,d))d.valid&&d.valid();else return d.invalid&&d.invalid(),d.message||b+" is invalid";else alert("Validation Function not found: "+d.isValid)}}return""},
isVisibleField=function(a,b){return b&&b.isVisible&&typeof b.isVisible=="function"&&!b.isVisible(a)?!1:!0},validateForm=function(a,b){var e={},f=!0;each(b.fields,function(c,g){var d=isVisibleField(a,c),h=isInvalidField(a,g,c,extend(defaultValidators,b.validators||{})),j=!d||d&&h==="";f&=j;e[g]={visible:d,error:h,valid:!!j}});each(a,function(a,b){hasOwnProperty.call(e,b)||(e[b]={visible:!0,error:"",valid:!0})});return{fields:e,validForm:!!f}},fieldsEntered={};
(function(a){a.fn.validation=function(){var b=Array.prototype.slice.call(arguments);if(b.length===2&&b[0]==="valid")a(this).data("valid",b[1]);else if(b.length===2&&b[0]==="invalid")a(this).data("invalid",b[1]);else{var e=this,b=function(b,d){var c,i,f=a(".validation_summary",e);f.html("");a("[name]",e).parent().removeClass("invalid");a(".star").remove();for(c in b.fields)if(i=b.fields[c],Object.prototype.hasOwnProperty.call(d,c)&&i.valid===!1){var g=a("[name="+c+"]",e);i=g.parent();g.attr("title",
b.fields[c].error.replace("*",""));i.addClass("invalid");f.append("<li>"+b.fields[c].error.replace("*","")+"</li>")}},f=function(b){for(var e in b.fields){var c=a("[name="+e+"]");b.fields[e].visible?(c.parent("p, div, label").show(),c.removeAttr("disabled")):(c.parent("p, div, label").hide(),c.attr("disabled","disabled"))}},c=arguments[0]?jQuery.extend({enableBlur:!0},arguments[0]):{};if(this[0].tagName!=="FORM")alert("must be a form element");else{c.validators=c.validators||{};c.processErrors=c.processErrors?
c.processErrors:b;c.processVisibility=c.processVisibility?c.processVisibility:f;var g=function(){var b={};a("[name]",e).each(function(e,c){var d=a(this).val(),f=c.name;c.type=="radio"&&a("[name='"+f+"']:checked").length===0&&(d="");c.type=="checkbox"&&(d=a("[name="+f+"]:checked"),d=d.length===0?"":d.map(function(){return this.value}).toArray());c.type=="select-multiple"&&(d=a("[name="+f+"] option:selected"),d=d.length===0?"":d.map(function(){return this.value}).toArray());c.type=="select-one"&&(d=
a("[name="+f+"] option:selected"),d=d.length===0?"":d.map(function(){return this.value}).toArray()[0]);b[c.name]=d});return b},d=function(){var a=g(),a=validateForm(a,c,fieldsEntered);c.processErrors(a,fieldsEntered);c.processVisibility(a);return a.validForm};a(this).submit(function(b){fieldsEntered=g();if(!d())return b.preventDefault(),b.stopPropagation(),typeof a(this).data("invalid")==="function"&&a(this).data("invalid")(b),!1;typeof a(this).data("valid")==="function"&&a(this).data("valid")(b)});
c.enableBlur&&(b=function(){fieldsEntered[this.name]=!0;return d()},a("select[name]",e).change(b),a("select multiple[name]",e).change(b),a("[type='radio'][name]",e).change(b),a("[type='checkbox'][name]",e).change(b),a("[name]",e).blur(b));fieldsEntered={};d()}}}})(jQuery);
