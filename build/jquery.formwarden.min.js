(function(b){typeof define==="function"?define(b):typeof exports==="object"?b(require,exports):b(void 0,fw={})})(function(b,e){var d=Object.prototype.hasOwnProperty,h=Array.prototype.forEach,j=Array.prototype.slice,k={},g=function(a,f,b){if(a!=null)if(h&&a.forEach===h)a.forEach(f,b);else if(a.length===+a.length)for(var c=0,e=a.length;c<e;c++){if(c in a&&f.call(b,a[c],c,a)===k)break}else for(c in a)if(d.call(a,c)&&f.call(b,a[c],c,a)===k)break},c=function(a){g(j.call(arguments,1),function(b){for(var c in b)b[c]!==
void 0&&(a[c]=b[c])});return a},l={required:function(a){return a===void 0||a===null?!0:a.length||a!==""},email:function(a){if(a)return a.match(/\b[A-Z0-9._%-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b/i)},ssn:function(a){if(a)return a.match(/\b[0-9]{3}-[0-9]{2}-[0-9]{4}\b/)},date:function(a){if(a)return a.match(/(0[1-9]|1[012])[- /.](0[1-9]|[12][0-9]|3[01])[- /.](19|20)[0-9]{2}/)},iso8601:function(a){if(a)return a.match(/^(\d{4})\D?(0[1-9]|1[0-2])\D?([12]\d|0[1-9]|3[01])$/)},maxLength:function(a,b,c){if(a)return a.length<=
c.length},minLength:function(a,b,c){if(a)return a.length>=c.length}};e.validateForm=function(a,b){var e={},h=!0,k=c(l,b.validators||{});g(b.fields,function(b,c){var f=b&&b.isVisible&&typeof b.isVisible=="function"&&!b.isVisible(a)?!1:!0,d;a:if(b){d=a[c];for(var g=!b.push?b.validations:b,l=0;l<g.length;l++){var i=g[l];if(i.isValid.test){if(!i.isValid.test(d)){d=i.message||c+" is invalid";break a}}else if(typeof i.isValid=="function"){if(!i.isValid(d,a)){d=i.message||c+" is invalid";break a}}else{var j=
k[i.isValid];if(j)if(j(d,a,i))i.valid&&i.valid();else{i.invalid&&i.invalid();d=i.message||c+" is invalid";break a}else console.log("Validation Function not found: "+i.isValid)}}d=""}else d=!0;g=!f||f&&d==="";h&=g;e[c]={visible:f,error:d,valid:!!g}});g(a,function(c,g){if(b.conventionBased&&c!="")for(var l in k)if(g.indexOf(l)>-1){var j=!!k[l](c,a);e[g]={visible:!0,error:j?"":k[l].message||g+" is invalid",valid:j};h&=j}d.call(e,g)||(e[g]={visible:!0,error:"",valid:!0})});return{fields:e,validForm:!!h}}});
var fieldsEntered={};
(function(b){b.fn.validation=function(){var e=Array.prototype.slice.call(arguments);if(e.length===2&&e[0]==="valid")b(this).data("valid",e[1]);else if(e.length===2&&e[0]==="invalid")b(this).data("invalid",e[1]);else{var d=arguments[0]?jQuery.extend({enableBlur:!0},arguments[0]):{},h=this,e=function(c,e){var a,f,g=d.validationSummary?b(d.validationSummary):b(".validation_summary",h);g.html("");b("[name]",h).parent().removeClass("invalid");b(".star").remove();for(a in c.fields)if(f=c.fields[a],Object.prototype.hasOwnProperty.call(e,
a)&&f.valid===!1){var j=b("[name='"+a+"']",h);f=j.parent();j.attr("title",c.fields[a].error.replace("*",""));f.addClass("invalid");g.append("<li>"+c.fields[a].error.replace("*","")+"</li>")}},j=function(c){for(var d in c.fields){var a=b("[name='"+d+"']");c.fields[d].visible?(a.parent("p, div, label").show(),a.removeAttr("disabled")):(a.parent("p, div, label").hide(),a.attr("disabled","disabled"))}};if(this[0].tagName!=="FORM")alert("must be a form element");else{d.validators=d.validators||{};d.processErrors=
d.processErrors?d.processErrors:e;d.processVisibility=d.processVisibility?d.processVisibility:j;var k=function(){var c={};b("[name]",h).each(function(d,a){var f=b(this).val(),e=a.name;a.type=="radio"&&b("[name='"+e+"']:checked").length===0&&(f="");a.type=="checkbox"&&(f=b("[name='"+e+"']:checked"),f=f.length===0?"":f.map(function(){return this.value}).toArray());a.type=="select-multiple"&&(f=b("[name='"+e+"'] option:selected"),f=f.length===0?"":f.map(function(){return this.value}).toArray());a.type==
"select-one"&&(f=b("[name='"+e+"'] option:selected"),f=f.length===0?"":f.map(function(){return this.value}).toArray()[0]);c[a.name]=f});return c},g=function(){var b=k(),b=fw.validateForm(b,d,fieldsEntered);d.processErrors(b,fieldsEntered);d.processVisibility(b);return b.validForm};b(this).submit(function(c){fieldsEntered=k();if(!g())return c.preventDefault(),c.stopPropagation(),typeof b(this).data("invalid")==="function"&&b(this).data("invalid")(c),!1;typeof b(this).data("valid")==="function"&&b(this).data("valid")(c)});
d.enableBlur&&(e=function(){fieldsEntered[this.name]=!0;return g()},b("select[name]",h).change(e),b("select multiple[name]",h).change(e),b("[type='radio'][name]",h).change(e),b("[type='checkbox'][name]",h).click(function(){this.checked?b(this).attr("checked","checked"):b(this).removeAttr("checked")}),b("[name]",h).blur(e));fieldsEntered={};g()}}}})(jQuery);
